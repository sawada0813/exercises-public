1. クロスオリジンリクエストに制約が無かった場合、どのような問題が発生するか述べなさい

同一オリジン以外へリクエストができてしまうと悪意のある攻撃者が指定した

## CSRF(クロスサイトリクエストフォージェリ)攻撃の被害に遭うリスクがある

認証情報を含むクッキーを保持したWebブラウザで悪意のあるウェブサイトを開き、正規のサービスへリクエストを送信できてしまう（不正な送金など）。

## XSS攻撃の被害に遭うリスクがある

同一オリジンポリシーに従っていればクッキーが正しくても異なるオリジン（XSS脆弱性あり）からリクエストが来てもエラーを返すが、クロスオリジンリクエストの制約がなければ盗み出したクッキーでリクエストを送ることができてしまう。

## セッションハイジャックの攻撃に遭うリスクがある

攻撃者がセッション変数を予測し異なるオリジンからリクエストを叩くことができてしまう。

2. クロスオリジンリクエストで メソッド(`POST`/`GET`)やリクエストの内容によって Preflight リクエストの有無が異なるのは何故か、その理由を述べなさい

前提として異なるオリジンからのリクエストかどうかを判断しているのはクライアント側であるため、GETとは異なりPOSTやPUT、DELETEはサーバ側で副作用を伴う（データの上書きや削除）ような処理の場合のため Preflight という機能が存在する。あらかじめ OPTION メソッドで preflight を飛ばすことでオリジンが意図しているものかどうかを判断している。

また、formからのリクエストなど、CORS以前から存在しているSame Origin Policyの制限を受けないリクエストに対いては Preflight Request は発生しない。

CORS以前から行われていた異なるオリジンに対するリクエスト形式をSimple Requestや単純リクエストと呼ぶ。Simple Requestの条件は次のとおりである。またFetchでも同様である。

- メソッドが GET, HEAD, POST のいずれかであること
- 手動で設定できるリクエストヘッダは次のいずれかであること
  - Accept
  - Accept-Language
  - Content-Language
  - Content-Type
  - Range
- Content-Typeのヘッダは次のいずれかであること
  - application/x-www-form-urlencoded
  - multipart/form-data
  - text/plain

参考

- https://zenn.dev/tm35/articles/ad05d8605588bd
- https://developer.mozilla.org/ja/docs/Web/HTTP/CORS#%E5%8D%98%E7%B4%94%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88
